name: "PR: Run INTEGRATION tests"

# When will this pipeline be activated?
# 1. On any pull-request, or if someone pushes to a branch called
# "tlim_testpr".
on:
  pull_request:
  workflow_dispatch:
  # Want to trigger all the tests without making a PR?
  # Run: git push origin main:tlim_testpr --force
  # This will trigger a full PR test on the main branch.
  # See https://github.com/StackExchange/dnscontrol/actions/workflows/pr_integration_tests.yml?query=branch%3Atlim_testpr
  push:
    branches:
      - 'tlim_testpr'

jobs:
  call-reusable:
    uses: ./.github/workflows/base_integration_tests.yml
    secrets: inherit
    with:
      test-args-cfworkers: 'false'